<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><!---for RWD--->
    <title>旅遊網</title>
   <!-- <link rel="icon" href="XX.png" type="image/x-icon">頁籤圖案標記可放logo--->
     <!---CSS reset-->
    <link rel="stylesheet" href="reset.css">
     <!---BS-->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!---slider css--->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <!-- CSS 自製--->
    <link rel="stylesheet" href="all.css">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!--Vue or JS and jQuery--->
    <script src="https://unpkg.com/vue@next"></script>

    <!--Js 自製-->
    <script src="all.js"></script>
</head>
<body>
    <div id="app">



        <div class="banner">
            <div class="header">LOGO</div>
            <a target="_blank" href="https://www.figma.com/file/3MoqzaOhZHD7TsYvJ8OWaI/%E6%97%85%E9%81%8A%E6%99%AF%E9%BB%9E%E7%B6%B2%E7%AB%99?node-id=2%3A794">設計圖連結</a>
            <!--.form-group bs4--->
            <div class="middleBox">
                <h1 class="h1 f-bold">和你一起探索台灣</h1>
                <div class="form-line">
                    <div><h6>地點</h6>全台灣
                        <div class="dropDown" >
                            <input type="checkbox" style="width:18px;height:18px;" id="All"><label for="All">全選</label>
                            <div class="selectRegion" > 
                                <div>
                                    <h5 class="f-bold">北部</h5> 
                                    <ul>
                                        <li><a href="###" @click="check">基隆市</a></li>
                                        <li><a href="###" @click="check">新北市</a></li>
                                        <li><a href="###" @click="check">台北市</a></li>
                                        <li><a href="###" @click="check">宜蘭縣</a></li>
                                    </ul>
                                </div>
                                <div>
                                    <h5 class="f-bold">中部</h5>
                                    <ul>
                                        <li><a href="###" @click="check">苗栗縣</a></li>
                                        <li><a href="###" @click="check">台中市</a></li>
                                        <li><a href="###" @click="check">彰化縣</a></li>
                                        <li><a href="###" @click="check">南投縣</a></li>
                                    </ul>
                                </div>
                                <div>
                                    <h5  class="f-bold">南部</h5>
                                    <ul>
                                        <li><a href="###" @click="check">嘉義縣</a></li>
                                        <li><a href="###" @click="check">台南市</a></li>
                                        <li><a href="###" @click="check">高雄市</a></li>
                                        <li><a href="###" @click="check">屏東縣</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>景點
                        <a href="###">2</a></div>
                    <input type="text" placeholder="試試輸入關鍵字">
                </div>
                       
            </div>
            
        </div>
        <div class="cardsArea">
            <!--第一列--->
            <h3 class="h3">近期活動</h3>  
                <div class="cardContainer">
                    <div v-for="(item,key) in Toursdata.slice(5,13)" :key="item"><!--使用v-for選染--->
                        <img class="cardImage" :src="item.Picture.PictureUrl1">
                        <div>
                            <h5><strong>{{item.ActivityName}}</strong></h5>
                            <img src="img/Vector.png" alt="地標小圖示"> <span class="tagSpan">{{item.Location}}</span>
                            <br>
                            <p class="f-Italic">期間{{item.StartTime}}~{{item.EndTime}}</p>
                        </div>
                    </div>  
                </div> 
            <!--第二列-->
            <h3 class="h3">熱門景點</h3>
            <div class="cardContainer">
                <div><!--使用v-for選染--->
                    <img class="cardImage">
                    <div></div>
                 </div>       
            </div>

            <!--第三列--->
            <h3 class="h3">熱門活動</h3>
            <div class="cardContainer">
                <div><!--使用v-for選染--->
                    <img class="cardImage" alt="">
                    <div></div>
                </div>
            </div>

            <!---第四列-->
            <h3 class="h3">民宿旅館</h3>
            <div class="cardContainer">
                <div v-for="(item,key) in data1.slice(9,13)" :key="item">
                    <img class="cardImage" :src="item.Picture.PictureUrl1" alt="">
                    <div>
                        <h5 class="f-bold">{{item.HotelName}}</h5>
                        <img src="img/Vector.png" alt="地標小圖示">
                        <span class="ml-3 tagSpan"><strong>{{item.City}}</strong></span>
                        <span class="ml tagSpan"><strong>{{item.Class}}</strong></span>
                        <p>{{item.Address}}</p>  
                    </div>
                </div>
            </div>
            
             

        </div>

        
         <!--testing swiper 不夠分離不好管理,底下只是先試寫---> 
         <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="font-size: 18px;">
                    <div class="cardContainer" style="padding:5% 0 10px 3%;"> 
                        <div v-for="(item,key) in Toursdata.slice(5,9)" :key="item" style="margin-left:5px;"><!--使用v-for選染--->
                            <img class="cardImage" :src="item.Picture.PictureUrl1">
                            <div style="line-height:1.5;">
                                <h5><strong>{{item.ActivityName}}</strong></h5>
                                <img src="img/Vector.png" alt="地標小圖示"> <span class="tagSpan">{{item.Location}}</span>
                                <br>
                                <p class="f-Italic">期間{{item.StartTime}}~{{item.EndTime}}</p>
                            </div>
                        </div>  
                    </div> 
                </div>
                <div class="swiper-slide" style="text-align: center; font-size: 18px;">
                    <div class="cardContainer" style="padding:5% 0 10px 3%;"> 
                        <div v-for="(item,key) in Toursdata.slice(9,13)" :key="item" style="margin-left:5px;"><!--使用v-for選染--->
                            <img class="cardImage" :src="item.Picture.PictureUrl1">
                            <div style="line-height:1.5;">
                                <h5><strong>{{item.ActivityName}}</strong></h5>
                                <img src="img/Vector.png" alt="地標小圖示"> <span class="tagSpan">{{item.Location}}</span>
                                <br>
                                <p class="f-Italic">期間{{item.StartTime}}~{{item.EndTime}}</p>
                            </div>
                        </div>  
                    </div> 
                </div>
                <div class="swiper-slide" style="text-align: center; font-size: 18px;">
                    <div class="cardContainer" style="padding:5% 0 10px 3%;"> 
                        <div v-for="(item,key) in Toursdata.slice(13,17)" :key="item" style="margin-left:5px;"><!--使用v-for選染--->
                            <img class="cardImage" :src="item.Picture.PictureUrl1">
                            <div style="line-height:1.5;">
                                <h5><strong>{{item.ActivityName}}</strong></h5>
                                <img src="img/Vector.png" alt="地標小圖示"> <span class="tagSpan">{{item.Location}}</span>
                                <br>
                                <p class="f-Italic">期間{{item.StartTime}}~{{item.EndTime}}</p>
                            </div>
                        </div>  
                    </div> 
                </div>
            </div>
            <div class="swiper-button-next" style="width:10px;height:10px; color:red;"></div>
            <div class="swiper-button-prev" style="color:green;"></div>
   
        </div>

        <!----->

        <div class="footer">footer</div>
    </div>
   
      
        
<script type="text/javascript">
/*Vue一定要跟html同一個檔案*/
const app={
    data(){
        return{
            data1:JSON.parse(localStorage.getItem('acconmodationPintong'))||[],//A或B 先看A有,就不看B了
            Toursdata:JSON.parse(localStorage.getItem('Toursdata'))||[],//觀光資料
            text:'helloWorld',
            txt:[],
            
        }
    },
    mounted(){//一載入畫面就會執行
        this.Accomondation();
        this.getToursdata();
        this.FilterTime();
    },
    methods:{//觸發後才執行
         Accomondation(){//取得屏東民宿+執行 FilterPicture
            const url=`https://ptx.transportdata.tw/MOTC/v2/Tourism/Hotel/PingtungCounty?%24top=30&%24format=JSON`;
            const myHeaders = new Headers();
            myHeaders.append('Content-Type', 'application/json');
            //myHeaders.append('Authorization','Bearer TokenNum');如有要金鑰再加入這句syntax
		    return fetch(url,{
			    method:'GET',
			    headers:myHeaders,
	    	})
		    .then(response=>response.json())
		    .then((result)=>{
		        //console.log(result)
			    this.data1 = result;
               // console.log(this.data1)
                localStorage.setItem('acconmodationPintong',JSON.stringify(this.data1));
			    this.FilterPicture();//整理api資料裡面的PictureUrl1				
	    	})
            .catch((error)=>{
			    console.log(error)
            })
         },// end of Acconmondation
         getToursdata(){
            const url=`https://ptx.transportdata.tw/MOTC/v2/Tourism/Activity?%24top=30&%24format=JSON`
            const myHeaders = new Headers();
            myHeaders.append('Content-Type', 'application/json');
            //myHeaders.append('Authorization','Bearer TokenNum');如有要金鑰再加入這句syntax
            return fetch(url,{
	            method:'GET',
		        headers:myHeaders,
	    	})
	        .then(response=>response.json())
	        .then((result)=>{
                this.Toursdata = result;
                localStorage.setItem('Toursdata',JSON.stringify(this.Toursdata));
                this.FilterTime();
                console.log(this.Toursdata);
	    	})
            .catch((error)=>{
			   console.log(error)
            })
         },//end of Toursdata

        FilterPicture(){//整理undefined的圖片
            const vm =this;
            vm.data1.filter(item=>{
               if(item.Picture.PictureUrl1===undefined){
                  item.Picture.PictureUrl1='https://tse1.mm.bing.net/th?id=OIP.Nug-FL9xet2RbM9nlClEqgHaEK&pid=Api&P=0&w=295&h=166.jpg';
                }
                return item.Picture.PictureUrl1;
            })
            console.log(this.data1)
            localStorage.setItem('acconmodationPintong',JSON.stringify(this.data1)); 
        },
        FilterTime(){//整理日期去除時間
            const vm=this;
            vm.Toursdata.forEach(item=>{
                if(item.EndTime.includes('T')){
                  item.EndTime= item.EndTime.split('T')[0];
                } 
                return item.EndTime;
            })
            vm.Toursdata.forEach(item=>{
                if(item.StartTime.includes('T')){
                    item.StartTime = item.StartTime.split('T')[0];
                }
                return item.StartTime;
            })
           // console.log(this.Toursdata)
        },
        check(e){//要在check裡面觸發什麼? 
            //console.log(e.target) 出現html tag
            let val=e.target.innerText;//出現a連結的標籤文字 這就是我要的沒錯~!innerText
            console.log(val)
            alert(val)
        },
    },
    computed(){ 
       
    },
}

Vue.createApp(app).mount('#app')

</script>

<!--swiper JS-->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
//Initialize Swiper 擺在同一個檔案才有效果
  var swiper = new Swiper(".mySwiper", {
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
  });

</script>
</body>
</html>